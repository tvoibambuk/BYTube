import '../styles/globals.css'\nimport type { AppProps } from 'next/app'\nimport { useEffect, useState } from 'react'\nimport { supabase } from '../lib/supabaseClient'\nimport NavBar from '../components/NavBar'\n\nexport default function App({ Component, pageProps }: AppProps) {\n  const [user, setUser] = useState<any>(null)\n\n  useEffect(() => {\n    supabase.auth.getSession().then(r => {\n      if ((r as any).data?.session) {\n        setUser((r as any).data.session.user)\n      }\n    })\n    const { data: listener } = supabase.auth.onAuthStateChange((event, session) => {\n      setUser(session?.user ?? null)\n    })\n    return () => {\n      // @ts-ignore\n      listener?.subscription?.unsubscribe && listener.subscription.unsubscribe()\n    }\n  }, [])\n\n  return (\n    <div className="mobile-wrap">\n      <NavBar user={user} />\n      <main className="p-4 flex-1">\n        <Component {...pageProps} supabaseUser={user} />\n      </main>\n      <nav className="bottom-nav">\n        <a>Главная</a>\n        <a>Исследовать</a>\n        <a href="/upload">Добавить</a>\n        <a>Подписки</a>\n        <a>Библиотека</a>\n      </nav>\n    </div>\n  )\n}