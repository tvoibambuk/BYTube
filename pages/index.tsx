import type { NextPage } from 'next'\nimport { useEffect, useState } from 'react'\nimport { supabase } from '../lib/supabaseClient'\nimport VideoCard from '../components/VideoCard'\n\ntype Video = {\n  id: string\n  title: string\n  channel: string\n  views: number\n  created_at: string\n  path: string\n}\n\nconst Home: NextPage = () => {\n  const [videos, setVideos] = useState<Video[]>([])\n  const [q, setQ] = useState('')\n\n  useEffect(() => {\n    fetchVideos()\n  }, [])\n\n  async function fetchVideos() {\n    const { data, error } = await supabase\n      .from('videos')\n      .select('*')\n      .order('created_at', { ascending: false })\n      .limit(50)\n    if (error) {\n      console.error(error)\n    } else {\n      setVideos(data as any)\n    }\n  }\n\n  const filtered = videos.filter(v =>\n    v.title.toLowerCase().includes(q.toLowerCase()) || v.channel.toLowerCase().includes(q.toLowerCase())\n  )\n\n  return (\n    <>\n      <div className="mb-4">\n        <input\n          value={q}\n          onChange={(e) => setQ(e.target.value)}\n          placeholder="Поиск"\n          className="w-full p-2 rounded bg-white/5"\n        />\n      </div>\n\n      <section className="flex flex-col gap-3">\n        {filtered.map(v => <VideoCard key={v.id} video={v} />)}\n        {filtered.length === 0 && <div className="text-[#94a3b8]">Ничего не найдено</div>}\n      </section>\n    <>\n  )\n}\n\nexport default Home